<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Facturaci√≥n Electr√≥nica SV</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <h2>üìÑ Facturaci√≥n SV</h2>
      </div>
      <nav class="nav-menu">
        <button class="nav-item active" data-view="dashboard">
          <span class="icon">üìä</span>
          Dashboard
        </button>
        <button class="nav-item" data-view="nueva-factura">
          <span class="icon">‚ûï</span>
          Nueva Factura
        </button>
        <button class="nav-item" data-view="facturas">
          <span class="icon">üìã</span>
          Facturas
        </button>
        <button class="nav-item" data-view="clientes">
          <span class="icon">üë•</span>
          Clientes
        </button>
        <button class="nav-item" data-view="productos">
          <span class="icon">üì¶</span>
          Productos
        </button>
        <button class="nav-item" data-view="configuracion">
          <span class="icon">‚öôÔ∏è</span>
          Configuraci√≥n
        </button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <header class="header">
        <h1 id="view-title">Dashboard</h1>
        <div class="header-actions">
          <span id="estado-conexion" class="badge badge-warning">Sin conexi√≥n</span>
          <span id="usuario-actual">Usuario</span>
        </div>
      </header>

      <div class="content-area">
        <!-- Dashboard View -->
        <div id="dashboard-view" class="view active">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">üìÑ</div>
              <div class="stat-info">
                <h3>Facturas Hoy</h3>
                <p class="stat-value" id="facturas-hoy">0</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">üí∞</div>
              <div class="stat-info">
                <h3>Total Hoy</h3>
                <p class="stat-value" id="total-hoy">$0.00</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">‚úÖ</div>
              <div class="stat-info">
                <h3>Enviadas a Hacienda</h3>
                <p class="stat-value" id="enviadas-hacienda">0</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">‚è≥</div>
              <div class="stat-info">
                <h3>Pendientes</h3>
                <p class="stat-value" id="pendientes">0</p>
              </div>
            </div>
          </div>

          <div class="recent-section">
            <h2>Facturas Recientes</h2>
            <table class="data-table" id="tabla-recientes">
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>No. Control</th>
                  <th>Cliente</th>
                  <th>Total</th>
                  <th>Estado</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="5" class="text-center">No hay facturas recientes</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Nueva Factura View -->
        <div id="nueva-factura-view" class="view">
          <form id="form-factura" class="factura-form">
            <div class="form-section">
              <h3>Informaci√≥n del Cliente</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label>Cliente</label>
                  <select id="cliente-select" required>
                    <option value="">Seleccionar cliente...</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Tipo de Documento</label>
                  <select id="tipo-dte" required>
                    <option value="01">Factura</option>
                    <option value="03">Comprobante Cr√©dito Fiscal</option>
                    <option value="14">Nota de Cr√©dito</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Condici√≥n de Operaci√≥n</label>
                  <select id="condicion-operacion">
                    <option value="1">Contado</option>
                    <option value="2">Cr√©dito</option>
                    <option value="3">Otro</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3>Items de la Factura</h3>
              <div class="items-header">
                <button type="button" class="btn btn-secondary" id="btn-agregar-item">
                  ‚ûï Agregar Item
                </button>
              </div>
              <table class="data-table" id="tabla-items">
                <thead>
                  <tr>
                    <th style="width: 35%">Producto</th>
                    <th style="width: 12%">Cantidad</th>
                    <th style="width: 15%">Precio Unit.</th>
                    <th style="width: 15%">IVA</th>
                    <th style="width: 15%">Subtotal</th>
                    <th style="width: 8%">Acciones</th>
                  </tr>
                </thead>
                <tbody id="items-body">
                  <tr>
                    <td colspan="6" class="text-center">No hay items agregados</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="form-section">
              <h3>Resumen</h3>
              <div class="resumen-grid">
                <div class="resumen-row">
                  <span>Subtotal Gravado:</span>
                  <span id="resumen-subtotal-gravado">$0.00</span>
                </div>
                <div class="resumen-row">
                  <span>Subtotal Exento:</span>
                  <span id="resumen-subtotal-exento">$0.00</span>
                </div>
                <div class="resumen-row">
                  <span>Subtotal Total:</span>
                  <span id="resumen-subtotal">$0.00</span>
                </div>
                <div class="resumen-row">
                  <span>IVA (13%):</span>
                  <span id="resumen-iva">$0.00</span>
                </div>
                <div class="resumen-row total">
                  <span>Total a Pagar:</span>
                  <span id="resumen-total">$0.00</span>
                </div>
                <div class="resumen-row">
                  <span>Total en Letras:</span>
                  <span id="resumen-letras" style="font-size: 0.85rem;">CERO D√ìLARES CON 00/100</span>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-secondary" id="btn-cancelar">Cancelar</button>
              <button type="submit" class="btn btn-primary">Generar Factura</button>
            </div>
          </form>
        </div>

        <!-- Facturas View -->
        <div id="facturas-view" class="view">
          <div class="view-header">
            <div class="filters">
              <input type="date" id="fecha-desde" class="form-control">
              <input type="date" id="fecha-hasta" class="form-control">
              <select id="filtro-estado" class="form-control">
                <option value="">Todos los estados</option>
                <option value="PENDIENTE">Pendiente</option>
                <option value="FIRMADO">Firmado</option>
                <option value="ENVIADO">Enviado</option>
                <option value="ACEPTADO">Aceptado</option>
                <option value="RECHAZADO">Rechazado</option>
              </select>
              <button class="btn btn-primary" id="btn-filtrar">Filtrar</button>
            </div>
          </div>
          <table class="data-table" id="tabla-facturas">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>No. Control</th>
                <th>Cliente</th>
                <th>Total</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="6" class="text-center">No hay facturas</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Clientes View -->
        <div id="clientes-view" class="view">
          <div class="view-header">
            <button class="btn btn-primary" id="btn-nuevo-cliente">‚ûï Nuevo Cliente</button>
          </div>
          <table class="data-table" id="tabla-clientes">
            <thead>
              <tr>
                <th>Documento</th>
                <th>NRC</th>
                <th>Nombre</th>
                <th>Tipo Persona</th>
                <th>Ubicaci√≥n</th>
                <th>Tel√©fono</th>
                <th>Email</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="8" class="text-center">No hay clientes</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Productos View -->
        <div id="productos-view" class="view">
          <div class="view-header">
            <button class="btn btn-primary" id="btn-nuevo-producto">‚ûï Nuevo Producto</button>
          </div>
          <table class="data-table" id="tabla-productos">
            <thead>
              <tr>
                <th>C√≥digo</th>
                <th>Descripci√≥n</th>
                <th>Tipo</th>
                <th>Precio Base</th>
                <th>IVA</th>
                <th>Precio Final</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="7" class="text-center">No hay productos</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Configuraci√≥n View -->
        <div id="configuracion-view" class="view">
          <form id="form-configuracion" class="config-form">
            <div class="form-section">
              <h3>Informaci√≥n de la Empresa</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label>NIT *</label>
                  <input type="text" id="config-nit" placeholder="0000-000000-000-0" required>
                </div>
                <div class="form-group">
                  <label>NRC (N√∫mero de Registro de Contribuyente)</label>
                  <input type="text" id="config-nrc" placeholder="000000-0">
                </div>
                <div class="form-group">
                  <label>Nombre de la Empresa *</label>
                  <input type="text" id="config-nombre" required>
                </div>
                <div class="form-group">
                  <label>Nombre Comercial</label>
                  <input type="text" id="config-nombre-comercial">
                </div>
                <div class="form-group">
                  <label>Tipo de Persona</label>
                  <select id="config-tipo-persona">
                    <option value="">Seleccionar...</option>
                    <option value="Natural">Natural</option>
                    <option value="Jur√≠dica">Jur√≠dica</option>
                  </select>
                </div>
                <div class="form-group full-width">
                  <label>Actividad Econ√≥mica *</label>
                  <select id="config-actividad" required>
                    <option value="">Seleccionar actividad...</option>
                    <optgroup label="A - Agricultura, ganader√≠a, silvicultura y pesca">
                      <option value="01">Producci√≥n agr√≠cola, pecuaria, caza y actividades de servicios conexas</option>
                      <option value="02">Silvicultura y extracci√≥n de madera</option>
                      <option value="03">Pesca y acuicultura</option>
                    </optgroup>
                    <optgroup label="B - Explotaci√≥n de minas y canteras">
                      <option value="05">Extracci√≥n de carb√≥n de piedra y lignito</option>
                      <option value="06">Extracci√≥n de petr√≥leo crudo y gas natural</option>
                      <option value="07">Extracci√≥n de minerales metal√≠feros</option>
                      <option value="08">Explotaci√≥n de otras minas y canteras</option>
                      <option value="09">Actividades de servicios de apoyo para la explotaci√≥n de minas</option>
                    </optgroup>
                    <optgroup label="C - Industrias manufactureras">
                      <option value="10">Elaboraci√≥n de productos alimenticios</option>
                      <option value="11">Elaboraci√≥n de bebidas</option>
                      <option value="12">Elaboraci√≥n de productos de tabaco</option>
                      <option value="13">Fabricaci√≥n de productos textiles</option>
                      <option value="14">Fabricaci√≥n de prendas de vestir</option>
                      <option value="15">Fabricaci√≥n de cueros y productos conexos</option>
                      <option value="16">Fabricaci√≥n de productos de madera y corcho, excepto muebles</option>
                      <option value="17">Fabricaci√≥n de papel y de productos de papel</option>
                      <option value="18">Impresi√≥n y reproducci√≥n de grabaciones</option>
                      <option value="19">Fabricaci√≥n de coque y de productos de la refinaci√≥n del petr√≥leo</option>
                      <option value="20">Fabricaci√≥n de sustancias y productos qu√≠micos</option>
                      <option value="21">Fabricaci√≥n de productos farmac√©uticos</option>
                      <option value="22">Fabricaci√≥n de productos de caucho y pl√°stico</option>
                      <option value="23">Fabricaci√≥n de otros productos minerales no met√°licos</option>
                      <option value="24">Fabricaci√≥n de metales comunes</option>
                      <option value="25">Fabricaci√≥n de productos elaborados de metal, excepto maquinaria y equipo</option>
                      <option value="26">Fabricaci√≥n de productos de inform√°tica, de electr√≥nica y de √≥ptica</option>
                      <option value="27">Fabricaci√≥n de equipo el√©ctrico</option>
                      <option value="28">Fabricaci√≥n de maquinaria y equipo n.c.p.</option>
                      <option value="29">Fabricaci√≥n de veh√≠culos automotores, remolques y semirremolques</option>
                      <option value="30">Fabricaci√≥n de otros tipos de equipo de transporte</option>
                      <option value="31">Fabricaci√≥n de muebles</option>
                      <option value="32">Otras industrias manufactureras</option>
                      <option value="33">Reparaci√≥n e instalaci√≥n de maquinaria y equipo</option>
                    </optgroup>
                    <optgroup label="D - Suministro de electricidad, gas, vapor y aire acondicionado">
                      <option value="35">Suministro de electricidad, gas, vapor y aire acondicionado</option>
                    </optgroup>
                    <optgroup label="E - Suministro de agua; evacuaci√≥n de aguas residuales, gesti√≥n de desechos">
                      <option value="36">Captaci√≥n, tratamiento y distribuci√≥n de agua</option>
                      <option value="37">Evacuaci√≥n de aguas residuales (alcantarillado)</option>
                      <option value="38">Recolecci√≥n, tratamiento y eliminaci√≥n de desechos; reciclaje</option>
                      <option value="39">Actividades de saneamiento y otros servicios de gesti√≥n de desechos</option>
                    </optgroup>
                    <optgroup label="F - Construcci√≥n">
                      <option value="41">Construcci√≥n de edificios</option>
                      <option value="42">Obras de ingenier√≠a civil</option>
                      <option value="43">Actividades especializadas de construcci√≥n</option>
                    </optgroup>
                    <optgroup label="G - Comercio al por mayor y al por menor; reparaci√≥n de veh√≠culos automotores">
                      <option value="45">Comercio al por mayor y al por menor y reparaci√≥n de veh√≠culos automotores y motocicletas</option>
                      <option value="46">Comercio al por mayor, excepto de veh√≠culos automotores y motocicletas</option>
                      <option value="47">Comercio al por menor, excepto de veh√≠culos automotores y motocicletas</option>
                    </optgroup>
                    <optgroup label="H - Transporte y almacenamiento">
                      <option value="49">Transporte por v√≠a terrestre y transporte por tuber√≠as</option>
                      <option value="50">Transporte por v√≠a acu√°tica</option>
                      <option value="51">Transporte por v√≠a a√©rea</option>
                      <option value="52">Almacenamiento y actividades de apoyo al transporte</option>
                      <option value="53">Actividades postales y de mensajer√≠a</option>
                    </optgroup>
                    <optgroup label="I - Actividades de alojamiento y de servicio de comidas">
                      <option value="55">Actividades de alojamiento</option>
                      <option value="56">Actividades de servicio de comidas y bebidas</option>
                    </optgroup>
                    <optgroup label="J - Informaci√≥n y comunicaciones">
                      <option value="58">Actividades de edici√≥n</option>
                      <option value="59">Actividades de producci√≥n de pel√≠culas cinematogr√°ficas, videos y programas de televisi√≥n, grabaci√≥n de sonido y edici√≥n de m√∫sica</option>
                      <option value="60">Actividades de programaci√≥n y transmisi√≥n</option>
                      <option value="61">Telecomunicaciones</option>
                      <option value="62">Programaci√≥n inform√°tica, consultor√≠a inform√°tica y actividades conexas</option>
                      <option value="63">Actividades de servicios de informaci√≥n</option>
                    </optgroup>
                    <optgroup label="K - Actividades financieras y de seguros">
                      <option value="64">Actividades de servicios financieros, excepto las de seguros y fondos de pensiones</option>
                      <option value="65">Seguros, reaseguros y fondos de pensiones, excepto planes de seguridad social de afiliaci√≥n obligatoria</option>
                      <option value="66">Actividades auxiliares de las actividades de servicios financieros</option>
                    </optgroup>
                    <optgroup label="L - Actividades inmobiliarias">
                      <option value="68">Actividades inmobiliarias</option>
                    </optgroup>
                    <optgroup label="M - Actividades profesionales, cient√≠ficas y t√©cnicas">
                      <option value="69">Actividades jur√≠dicas y contables</option>
                      <option value="70">Actividades de oficinas centrales; actividades de consultor√≠a en gesti√≥n empresarial</option>
                      <option value="71">Actividades de arquitectura e ingenier√≠a; ensayos y an√°lisis t√©cnicos</option>
                      <option value="72">Investigaci√≥n cient√≠fica y desarrollo</option>
                      <option value="73">Publicidad y estudios de mercado</option>
                      <option value="74">Otras actividades profesionales, cient√≠ficas y t√©cnicas</option>
                      <option value="75">Actividades veterinarias</option>
                    </optgroup>
                    <optgroup label="N - Actividades de servicios administrativos y de apoyo">
                      <option value="77">Actividades de alquiler y arrendamiento</option>
                      <option value="78">Actividades de empleo</option>
                      <option value="79">Actividades de agencias de viajes, operadores tur√≠sticos y otros servicios de reserva</option>
                      <option value="80">Actividades de investigaci√≥n y seguridad</option>
                      <option value="81">Actividades de servicios a edificios y paisajismo</option>
                      <option value="82">Actividades administrativas y de apoyo de oficinas y otras actividades de apoyo a empresas</option>
                    </optgroup>
                    <optgroup label="O - Administraci√≥n p√∫blica y defensa; planes de seguridad social obligatoria">
                      <option value="84">Administraci√≥n p√∫blica y defensa; planes de seguridad social de afiliaci√≥n obligatoria</option>
                    </optgroup>
                    <optgroup label="P - Ense√±anza">
                      <option value="85">Ense√±anza</option>
                    </optgroup>
                    <optgroup label="Q - Actividades de atenci√≥n de la salud humana y de asistencia social">
                      <option value="86">Actividades de atenci√≥n de la salud humana</option>
                      <option value="87">Actividades de atenci√≥n en instituciones</option>
                      <option value="88">Actividades de asistencia social sin alojamiento</option>
                    </optgroup>
                    <optgroup label="R - Actividades art√≠sticas, de entretenimiento y recreativas">
                      <option value="90">Actividades creativas, art√≠sticas y de esparcimiento</option>
                      <option value="91">Actividades de bibliotecas, archivos, museos y otras actividades culturales</option>
                      <option value="92">Actividades de juegos de azar y apuestas</option>
                      <option value="93">Actividades deportivas, de esparcimiento y recreativas</option>
                    </optgroup>
                    <optgroup label="S - Otras actividades de servicios">
                      <option value="94">Actividades de asociaciones</option>
                      <option value="95">Reparaci√≥n de ordenadores y de efectos personales y enseres dom√©sticos</option>
                      <option value="96">Otras actividades de servicios personales</option>
                    </optgroup>
                    <optgroup label="T - Actividades de los hogares como empleadores">
                      <option value="97">Actividad de los hogares en calidad de empleadores de personal dom√©stico</option>
                      <option value="98">Actividades indiferenciadas de producci√≥n de bienes y servicios de los hogares para uso propio</option>
                    </optgroup>
                    <optgroup label="U - Actividades de organizaciones y √≥rganos extraterritoriales">
                      <option value="99">Actividades de organizaciones y √≥rganos extraterritoriales</option>
                    </optgroup>
                  </select>
                </div>
                <div class="form-group">
                  <label>Tel√©fono</label>
                  <input type="tel" id="config-telefono">
                </div>
                <div class="form-group">
                  <label>Email</label>
                  <input type="email" id="config-email">
                </div>
                <div class="form-group">
                  <label>Departamento *</label>
                  <select id="config-departamento" required>
                    <option value="">Seleccionar...</option>
                    <option value="01">Ahuachap√°n</option>
                    <option value="02">Santa Ana</option>
                    <option value="03">Sonsonate</option>
                    <option value="04">Chalatenango</option>
                    <option value="05">La Libertad</option>
                    <option value="06">San Salvador</option>
                    <option value="07">Cuscatl√°n</option>
                    <option value="08">La Paz</option>
                    <option value="09">Caba√±as</option>
                    <option value="10">San Vicente</option>
                    <option value="11">Usulut√°n</option>
                    <option value="12">San Miguel</option>
                    <option value="13">Moraz√°n</option>
                    <option value="14">La Uni√≥n</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Municipio *</label>
                  <select id="config-municipio" required>
                    <option value="">Seleccione primero un departamento...</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Distrito *</label>
                  <select id="config-distrito" required>
                    <option value="">Seleccione primero un municipio...</option>
                  </select>
                </div>
                <div class="form-group full-width">
                  <label>Direcci√≥n *</label>
                  <textarea id="config-direccion" rows="2" required></textarea>
                </div>
                <div class="form-group full-width">
                  <label>Direcci√≥n Complementaria</label>
                  <textarea id="config-direccion-complementaria" rows="2" placeholder="Referencias adicionales de la ubicaci√≥n"></textarea>
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3>Configuraci√≥n de Hacienda</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label>Usuario Hacienda</label>
                  <input type="text" id="config-hacienda-usuario">
                </div>
                <div class="form-group">
                  <label>Contrase√±a Hacienda</label>
                  <input type="password" id="config-hacienda-password">
                </div>
                <div class="form-group">
                  <label>Ambiente</label>
                  <select id="config-hacienda-ambiente">
                    <option value="pruebas">Pruebas</option>
                    <option value="produccion">Producci√≥n</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>C√≥digo Establecimiento</label>
                  <input type="text" id="config-establecimiento">
                </div>
                <div class="form-group">
                  <label>Punto de Venta</label>
                  <input type="text" id="config-punto-venta">
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-secondary" id="btn-test-conexion">
                Probar Conexi√≥n
              </button>
              <button type="submit" class="btn btn-primary">Guardar Configuraci√≥n</button>
            </div>
          </form>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal para ver detalle de factura -->
  <div id="modal-ver-factura" class="modal">
    <div class="modal-content" style="max-width: 800px;">
      <div class="modal-header">
        <h2>Detalle de Factura</h2>
        <button class="close-modal" onclick="cerrarModalVerFactura()">√ó</button>
      </div>
      <div class="factura-detalle">
        <!-- Informaci√≥n de la factura -->
        <div class="factura-info">
          <div class="info-row">
            <span class="info-label">N√∫mero de Control:</span>
            <span id="factura-numero-control" class="info-value"></span>
          </div>
          <div class="info-row">
            <span class="info-label">C√≥digo de Generaci√≥n:</span>
            <span id="factura-codigo-generacion" class="info-value"></span>
          </div>
          <div class="info-row">
            <span class="info-label">Fecha de Emisi√≥n:</span>
            <span id="factura-fecha" class="info-value"></span>
          </div>
          <div class="info-row">
            <span class="info-label">Estado:</span>
            <span id="factura-estado-badge" class="info-value"></span>
          </div>
        </div>

        <!-- Informaci√≥n del cliente -->
        <div class="factura-section">
          <h3>Cliente</h3>
          <div class="info-row">
            <span class="info-label">Nombre:</span>
            <span id="factura-cliente-nombre" class="info-value"></span>
          </div>
          <div class="info-row">
            <span class="info-label">Documento:</span>
            <span id="factura-cliente-documento" class="info-value"></span>
          </div>
          <div class="info-row">
            <span class="info-label">Direcci√≥n:</span>
            <span id="factura-cliente-direccion" class="info-value"></span>
          </div>
        </div>

        <!-- Items de la factura -->
        <div class="factura-section">
          <h3>Detalle de Productos/Servicios</h3>
          <table class="data-table" id="factura-items-tabla">
            <thead>
              <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio Unit.</th>
                <th>IVA</th>
                <th>Subtotal</th>
              </tr>
            </thead>
            <tbody id="factura-items-body">
            </tbody>
          </table>
        </div>

        <!-- Resumen -->
        <div class="factura-section">
          <h3>Resumen</h3>
          <div class="factura-resumen">
            <div class="info-row">
              <span class="info-label">Subtotal:</span>
              <span id="factura-subtotal" class="info-value"></span>
            </div>
            <div class="info-row">
              <span class="info-label">IVA (13%):</span>
              <span id="factura-iva" class="info-value"></span>
            </div>
            <div class="info-row total-row">
              <span class="info-label">Total:</span>
              <span id="factura-total" class="info-value"></span>
            </div>
          </div>
        </div>

        <!-- Acciones -->
        <div class="form-actions" style="margin-top: 2rem;">
          <button type="button" class="btn btn-secondary" onclick="cerrarModalVerFactura()">Cerrar</button>
          <button type="button" class="btn btn-success" id="btn-firmar-factura" style="display: none;">
            üîê Firmar Documento
          </button>
          <button type="button" class="btn btn-primary" id="btn-enviar-factura" style="display: none;">
            üì§ Enviar a Hacienda
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal para agregar item a factura -->
  <div id="modal-item" class="modal">
    <div class="modal-content" style="max-width: 500px;">
      <div class="modal-header">
        <h2>Agregar Producto a Factura</h2>
        <button class="close-modal" onclick="cerrarModalItem()">√ó</button>
      </div>
      <form id="form-item" class="modal-form">
        <div class="form-group full-width">
          <label>Producto *</label>
          <select id="item-producto" required>
            <option value="">Seleccionar producto...</option>
          </select>
        </div>

        <div class="form-group full-width">
          <label>Cantidad *</label>
          <input type="number" id="item-cantidad" min="1" step="0.01" value="1" required>
        </div>

        <div class="form-group full-width">
          <label>Precio Unitario</label>
          <input type="number" id="item-precio" step="0.01" readonly style="background: #f1f5f9;">
        </div>

        <div class="form-group full-width">
          <label>Descuento (Opcional)</label>
          <input type="number" id="item-descuento" min="0" step="0.01" value="0" placeholder="0.00">
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="cerrarModalItem()">Cancelar</button>
          <button type="submit" class="btn btn-primary">Agregar a Factura</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal para Cliente -->
  <div id="modal-cliente" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-cliente-titulo">Nuevo Cliente</h2>
        <button class="close-modal" onclick="cerrarModalCliente()">√ó</button>
      </div>
      <form id="form-cliente" class="modal-form">
        <input type="hidden" id="cliente-id">
        
        <div class="form-group">
          <label>Tipo de Documento *</label>
          <select id="cliente-tipo-documento" required>
            <option value="13">NIT</option>
            <option value="36">DUI</option>
            <option value="37">Pasaporte</option>
            <option value="03">Carnet de Residente</option>
            <option value="02">Otro</option>
          </select>
        </div>

        <div class="form-group">
          <label>N√∫mero de Documento *</label>
          <input type="text" id="cliente-numero-documento" placeholder="0000-000000-000-0" required>
        </div>

        <div class="form-group">
          <label>NRC (N√∫mero de Registro de Contribuyente)</label>
          <input type="text" id="cliente-nrc" placeholder="000000-0">
        </div>

        <div class="form-group">
          <label>Tipo de Persona</label>
          <select id="cliente-tipo-persona">
            <option value="">Seleccionar...</option>
            <option value="Natural">Natural</option>
            <option value="Jur√≠dica">Jur√≠dica</option>
          </select>
        </div>

        <div class="form-group">
          <label>Nombre o Raz√≥n Social *</label>
          <input type="text" id="cliente-nombre" required>
        </div>

        <div class="form-group">
          <label>Nombre Comercial</label>
          <input type="text" id="cliente-nombre-comercial">
        </div>

        <div class="form-group">
          <label>Tel√©fono</label>
          <input type="tel" id="cliente-telefono" placeholder="7000-0000">
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" id="cliente-email">
        </div>

        <div class="form-group">
          <label>Departamento *</label>
          <select id="cliente-departamento" required>
            <option value="">Seleccionar...</option>
            <option value="01">Ahuachap√°n</option>
            <option value="02">Santa Ana</option>
            <option value="03">Sonsonate</option>
            <option value="04">Chalatenango</option>
            <option value="05">La Libertad</option>
            <option value="06">San Salvador</option>
            <option value="07">Cuscatl√°n</option>
            <option value="08">La Paz</option>
            <option value="09">Caba√±as</option>
            <option value="10">San Vicente</option>
            <option value="11">Usulut√°n</option>
            <option value="12">San Miguel</option>
            <option value="13">Moraz√°n</option>
            <option value="14">La Uni√≥n</option>
          </select>
        </div>

        <div class="form-group">
          <label>Municipio *</label>
          <select id="cliente-municipio" required>
            <option value="">Seleccione primero un departamento...</option>
          </select>
        </div>

        <div class="form-group">
          <label>Distrito *</label>
          <select id="cliente-distrito" required>
            <option value="">Seleccione primero un municipio...</option>
          </select>
        </div>

        <div class="form-group full-width">
          <label>Direcci√≥n</label>
          <textarea id="cliente-direccion" rows="2"></textarea>
        </div>

        <div class="form-group full-width">
          <label>Actividad Econ√≥mica *</label>
          <select id="cliente-giro" required>
            <option value="">Seleccionar actividad...</option>
            <optgroup label="A - Agricultura, ganader√≠a, silvicultura y pesca">
              <option value="01">Producci√≥n agr√≠cola, pecuaria, caza y actividades de servicios conexas</option>
              <option value="02">Silvicultura y extracci√≥n de madera</option>
              <option value="03">Pesca y acuicultura</option>
            </optgroup>
            <optgroup label="B - Explotaci√≥n de minas y canteras">
              <option value="05">Extracci√≥n de carb√≥n de piedra y lignito</option>
              <option value="06">Extracci√≥n de petr√≥leo crudo y gas natural</option>
              <option value="07">Extracci√≥n de minerales metal√≠feros</option>
              <option value="08">Explotaci√≥n de otras minas y canteras</option>
              <option value="09">Actividades de servicios de apoyo para la explotaci√≥n de minas</option>
            </optgroup>
            <optgroup label="C - Industrias manufactureras">
              <option value="10">Elaboraci√≥n de productos alimenticios</option>
              <option value="11">Elaboraci√≥n de bebidas</option>
              <option value="12">Elaboraci√≥n de productos de tabaco</option>
              <option value="13">Fabricaci√≥n de productos textiles</option>
              <option value="14">Fabricaci√≥n de prendas de vestir</option>
              <option value="15">Fabricaci√≥n de cueros y productos conexos</option>
              <option value="16">Fabricaci√≥n de productos de madera y corcho, excepto muebles</option>
              <option value="17">Fabricaci√≥n de papel y de productos de papel</option>
              <option value="18">Impresi√≥n y reproducci√≥n de grabaciones</option>
              <option value="19">Fabricaci√≥n de coque y de productos de la refinaci√≥n del petr√≥leo</option>
              <option value="20">Fabricaci√≥n de sustancias y productos qu√≠micos</option>
              <option value="21">Fabricaci√≥n de productos farmac√©uticos</option>
              <option value="22">Fabricaci√≥n de productos de caucho y pl√°stico</option>
              <option value="23">Fabricaci√≥n de otros productos minerales no met√°licos</option>
              <option value="24">Fabricaci√≥n de metales comunes</option>
              <option value="25">Fabricaci√≥n de productos elaborados de metal, excepto maquinaria y equipo</option>
              <option value="26">Fabricaci√≥n de productos de inform√°tica, de electr√≥nica y de √≥ptica</option>
              <option value="27">Fabricaci√≥n de equipo el√©ctrico</option>
              <option value="28">Fabricaci√≥n de maquinaria y equipo n.c.p.</option>
              <option value="29">Fabricaci√≥n de veh√≠culos automotores, remolques y semirremolques</option>
              <option value="30">Fabricaci√≥n de otros tipos de equipo de transporte</option>
              <option value="31">Fabricaci√≥n de muebles</option>
              <option value="32">Otras industrias manufactureras</option>
              <option value="33">Reparaci√≥n e instalaci√≥n de maquinaria y equipo</option>
            </optgroup>
            <optgroup label="D - Suministro de electricidad, gas, vapor y aire acondicionado">
              <option value="35">Suministro de electricidad, gas, vapor y aire acondicionado</option>
            </optgroup>
            <optgroup label="E - Suministro de agua; evacuaci√≥n de aguas residuales, gesti√≥n de desechos">
              <option value="36">Captaci√≥n, tratamiento y distribuci√≥n de agua</option>
              <option value="37">Evacuaci√≥n de aguas residuales (alcantarillado)</option>
              <option value="38">Recolecci√≥n, tratamiento y eliminaci√≥n de desechos; reciclaje</option>
              <option value="39">Actividades de saneamiento y otros servicios de gesti√≥n de desechos</option>
            </optgroup>
            <optgroup label="F - Construcci√≥n">
              <option value="41">Construcci√≥n de edificios</option>
              <option value="42">Obras de ingenier√≠a civil</option>
              <option value="43">Actividades especializadas de construcci√≥n</option>
            </optgroup>
            <optgroup label="G - Comercio al por mayor y al por menor; reparaci√≥n de veh√≠culos automotores">
              <option value="45">Comercio al por mayor y al por menor y reparaci√≥n de veh√≠culos automotores y motocicletas</option>
              <option value="46">Comercio al por mayor, excepto de veh√≠culos automotores y motocicletas</option>
              <option value="47">Comercio al por menor, excepto de veh√≠culos automotores y motocicletas</option>
            </optgroup>
            <optgroup label="H - Transporte y almacenamiento">
              <option value="49">Transporte por v√≠a terrestre y transporte por tuber√≠as</option>
              <option value="50">Transporte por v√≠a acu√°tica</option>
              <option value="51">Transporte por v√≠a a√©rea</option>
              <option value="52">Almacenamiento y actividades de apoyo al transporte</option>
              <option value="53">Actividades postales y de mensajer√≠a</option>
            </optgroup>
            <optgroup label="I - Actividades de alojamiento y de servicio de comidas">
              <option value="55">Actividades de alojamiento</option>
              <option value="56">Actividades de servicio de comidas y bebidas</option>
            </optgroup>
            <optgroup label="J - Informaci√≥n y comunicaciones">
              <option value="58">Actividades de edici√≥n</option>
              <option value="59">Actividades de producci√≥n de pel√≠culas cinematogr√°ficas, videos y programas de televisi√≥n, grabaci√≥n de sonido y edici√≥n de m√∫sica</option>
              <option value="60">Actividades de programaci√≥n y transmisi√≥n</option>
              <option value="61">Telecomunicaciones</option>
              <option value="62">Programaci√≥n inform√°tica, consultor√≠a inform√°tica y actividades conexas</option>
              <option value="63">Actividades de servicios de informaci√≥n</option>
            </optgroup>
            <optgroup label="K - Actividades financieras y de seguros">
              <option value="64">Actividades de servicios financieros, excepto las de seguros y fondos de pensiones</option>
              <option value="65">Seguros, reaseguros y fondos de pensiones, excepto planes de seguridad social de afiliaci√≥n obligatoria</option>
              <option value="66">Actividades auxiliares de las actividades de servicios financieros</option>
            </optgroup>
            <optgroup label="L - Actividades inmobiliarias">
              <option value="68">Actividades inmobiliarias</option>
            </optgroup>
            <optgroup label="M - Actividades profesionales, cient√≠ficas y t√©cnicas">
              <option value="69">Actividades jur√≠dicas y contables</option>
              <option value="70">Actividades de oficinas centrales; actividades de consultor√≠a en gesti√≥n empresarial</option>
              <option value="71">Actividades de arquitectura e ingenier√≠a; ensayos y an√°lisis t√©cnicos</option>
              <option value="72">Investigaci√≥n cient√≠fica y desarrollo</option>
              <option value="73">Publicidad y estudios de mercado</option>
              <option value="74">Otras actividades profesionales, cient√≠ficas y t√©cnicas</option>
              <option value="75">Actividades veterinarias</option>
            </optgroup>
            <optgroup label="N - Actividades de servicios administrativos y de apoyo">
              <option value="77">Actividades de alquiler y arrendamiento</option>
              <option value="78">Actividades de empleo</option>
              <option value="79">Actividades de agencias de viajes, operadores tur√≠sticos y otros servicios de reserva</option>
              <option value="80">Actividades de investigaci√≥n y seguridad</option>
              <option value="81">Actividades de servicios a edificios y paisajismo</option>
              <option value="82">Actividades administrativas y de apoyo de oficinas y otras actividades de apoyo a empresas</option>
            </optgroup>
            <optgroup label="O - Administraci√≥n p√∫blica y defensa; planes de seguridad social obligatoria">
              <option value="84">Administraci√≥n p√∫blica y defensa; planes de seguridad social de afiliaci√≥n obligatoria</option>
            </optgroup>
            <optgroup label="P - Ense√±anza">
              <option value="85">Ense√±anza</option>
            </optgroup>
            <optgroup label="Q - Actividades de atenci√≥n de la salud humana y de asistencia social">
              <option value="86">Actividades de atenci√≥n de la salud humana</option>
              <option value="87">Actividades de atenci√≥n en instituciones</option>
              <option value="88">Actividades de asistencia social sin alojamiento</option>
            </optgroup>
            <optgroup label="R - Actividades art√≠sticas, de entretenimiento y recreativas">
              <option value="90">Actividades creativas, art√≠sticas y de esparcimiento</option>
              <option value="91">Actividades de bibliotecas, archivos, museos y otras actividades culturales</option>
              <option value="92">Actividades de juegos de azar y apuestas</option>
              <option value="93">Actividades deportivas, de esparcimiento y recreativas</option>
            </optgroup>
            <optgroup label="S - Otras actividades de servicios">
              <option value="94">Actividades de asociaciones</option>
              <option value="95">Reparaci√≥n de ordenadores y de efectos personales y enseres dom√©sticos</option>
              <option value="96">Otras actividades de servicios personales</option>
            </optgroup>
            <optgroup label="T - Actividades de los hogares como empleadores">
              <option value="97">Actividad de los hogares en calidad de empleadores de personal dom√©stico</option>
              <option value="98">Actividades indiferenciadas de producci√≥n de bienes y servicios de los hogares para uso propio</option>
            </optgroup>
            <optgroup label="U - Actividades de organizaciones y √≥rganos extraterritoriales">
              <option value="99">Actividades de organizaciones y √≥rganos extraterritoriales</option>
            </optgroup>
          </select>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="cerrarModalCliente()">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar Cliente</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal para Producto -->
  <div id="modal-producto" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-producto-titulo">Nuevo Producto/Servicio</h2>
        <button class="close-modal" onclick="cerrarModalProducto()">√ó</button>
      </div>
      <form id="form-producto" class="modal-form">
        <input type="hidden" id="producto-id">
        
        <div class="form-group">
          <label>Tipo *</label>
          <select id="producto-tipo" required>
            <option value="1">Bien (Producto)</option>
            <option value="2">Servicio</option>
            <option value="3">Ambos</option>
            <option value="4">Otros</option>
          </select>
        </div>

        <div class="form-group">
          <label>C√≥digo *</label>
          <input type="text" id="producto-codigo" placeholder="PROD-001" required>
        </div>

        <div class="form-group full-width">
          <label>Descripci√≥n *</label>
          <input type="text" id="producto-descripcion" placeholder="Descripci√≥n del producto o servicio" required>
        </div>

        <div class="form-group">
          <label>Precio Unitario *</label>
          <input type="number" id="producto-precio" step="0.01" min="0" placeholder="0.00" required>
        </div>

        <div class="form-group">
          <label>Unidad de Medida</label>
          <select id="producto-unidad">
            <option value="99">Unidad</option>
            <option value="59">Caja</option>
            <option value="11">Kilogramo</option>
            <option value="14">Gramo</option>
            <option value="22">Metro</option>
            <option value="23">Metro cuadrado</option>
            <option value="26">Metro c√∫bico</option>
            <option value="29">Litro</option>
            <option value="58">Docena</option>
            <option value="99">Otros</option>
          </select>
        </div>

        <div class="form-group">
          <label>IVA (13%)</label>
          <select id="producto-iva" required>
            <option value="1">Gravado (con IVA)</option>
            <option value="0">Exento (sin IVA)</option>
          </select>
        </div>

        <div class="form-group full-width">
          <label>Notas o Comentarios</label>
          <textarea id="producto-notas" rows="2" placeholder="Informaci√≥n adicional del producto"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="cerrarModalProducto()">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar Producto</button>
        </div>
      </form>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
