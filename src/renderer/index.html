<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Facturaci√≥n Electr√≥nica SV</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <h2>üìÑ Facturaci√≥n SV</h2>
      </div>
      <nav class="nav-menu">
        <button class="nav-item active" data-view="dashboard">
          <span class="icon">üìä</span>
          Dashboard
        </button>
        <button class="nav-item" data-view="nueva-factura">
          <span class="icon">‚ûï</span>
          Nueva Factura
        </button>
        <button class="nav-item" data-view="facturas">
          <span class="icon">üìã</span>
          Facturas
        </button>
        <button class="nav-item" data-view="clientes">
          <span class="icon">üë•</span>
          Clientes
        </button>
        <button class="nav-item" data-view="productos">
          <span class="icon">üì¶</span>
          Productos
        </button>
        <button class="nav-item" data-view="configuracion">
          <span class="icon">‚öôÔ∏è</span>
          Configuraci√≥n
        </button>
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <header class="header">
        <h1 id="view-title">Dashboard</h1>
        <div class="header-actions">
          <span id="estado-conexion" class="badge badge-warning">Sin conexi√≥n</span>
          <span id="usuario-actual">Usuario</span>
        </div>
      </header>

      <div class="content-area">
        <!-- Dashboard View -->
        <div id="dashboard-view" class="view active">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-icon">üìÑ</div>
              <div class="stat-info">
                <h3>Facturas Hoy</h3>
                <p class="stat-value" id="facturas-hoy">0</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">üí∞</div>
              <div class="stat-info">
                <h3>Total Hoy</h3>
                <p class="stat-value" id="total-hoy">$0.00</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">‚úÖ</div>
              <div class="stat-info">
                <h3>Enviadas a Hacienda</h3>
                <p class="stat-value" id="enviadas-hacienda">0</p>
              </div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">‚è≥</div>
              <div class="stat-info">
                <h3>Pendientes</h3>
                <p class="stat-value" id="pendientes">0</p>
              </div>
            </div>
          </div>

          <div class="recent-section">
            <h2>Facturas Recientes</h2>
            <table class="data-table" id="tabla-recientes">
              <thead>
                <tr>
                  <th>Fecha</th>
                  <th>No. Control</th>
                  <th>Cliente</th>
                  <th>Total</th>
                  <th>Estado</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="5" class="text-center">No hay facturas recientes</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Nueva Factura View -->
        <div id="nueva-factura-view" class="view">
          <form id="form-factura" class="factura-form">
            <div class="form-section">
              <h3>Informaci√≥n del Cliente</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label>Cliente</label>
                  <select id="cliente-select" required>
                    <option value="">Seleccionar cliente...</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Tipo de Documento</label>
                  <select id="tipo-dte" required>
                    <option value="01">Factura</option>
                    <option value="03">Comprobante Cr√©dito Fiscal</option>
                    <option value="14">Nota de Cr√©dito</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>Condici√≥n de Operaci√≥n</label>
                  <select id="condicion-operacion">
                    <option value="1">Contado</option>
                    <option value="2">Cr√©dito</option>
                    <option value="3">Otro</option>
                  </select>
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3>Items de la Factura</h3>
              <div class="items-header">
                <button type="button" class="btn btn-secondary" id="btn-agregar-item">
                  ‚ûï Agregar Item
                </button>
              </div>
              <table class="data-table" id="tabla-items">
                <thead>
                  <tr>
                    <th>Producto</th>
                    <th>Cantidad</th>
                    <th>Precio Unit.</th>
                    <th>Subtotal</th>
                    <th>Acciones</th>
                  </tr>
                </thead>
                <tbody id="items-body">
                  <tr>
                    <td colspan="5" class="text-center">No hay items agregados</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="form-section">
              <h3>Resumen</h3>
              <div class="resumen-grid">
                <div class="resumen-row">
                  <span>Subtotal:</span>
                  <span id="resumen-subtotal">$0.00</span>
                </div>
                <div class="resumen-row">
                  <span>IVA (13%):</span>
                  <span id="resumen-iva">$0.00</span>
                </div>
                <div class="resumen-row total">
                  <span>Total:</span>
                  <span id="resumen-total">$0.00</span>
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-secondary" id="btn-cancelar">Cancelar</button>
              <button type="submit" class="btn btn-primary">Generar Factura</button>
            </div>
          </form>
        </div>

        <!-- Facturas View -->
        <div id="facturas-view" class="view">
          <div class="view-header">
            <div class="filters">
              <input type="date" id="fecha-desde" class="form-control">
              <input type="date" id="fecha-hasta" class="form-control">
              <select id="filtro-estado" class="form-control">
                <option value="">Todos los estados</option>
                <option value="PENDIENTE">Pendiente</option>
                <option value="FIRMADO">Firmado</option>
                <option value="ENVIADO">Enviado</option>
                <option value="ACEPTADO">Aceptado</option>
                <option value="RECHAZADO">Rechazado</option>
              </select>
              <button class="btn btn-primary" id="btn-filtrar">Filtrar</button>
            </div>
          </div>
          <table class="data-table" id="tabla-facturas">
            <thead>
              <tr>
                <th>Fecha</th>
                <th>No. Control</th>
                <th>Cliente</th>
                <th>Total</th>
                <th>Estado</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="6" class="text-center">No hay facturas</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Clientes View -->
        <div id="clientes-view" class="view">
          <div class="view-header">
            <button class="btn btn-primary" id="btn-nuevo-cliente">‚ûï Nuevo Cliente</button>
          </div>
          <table class="data-table" id="tabla-clientes">
            <thead>
              <tr>
                <th>Documento</th>
                <th>Nombre</th>
                <th>Tel√©fono</th>
                <th>Email</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="5" class="text-center">No hay clientes</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Productos View -->
        <div id="productos-view" class="view">
          <div class="view-header">
            <button class="btn btn-primary" id="btn-nuevo-producto">‚ûï Nuevo Producto</button>
          </div>
          <table class="data-table" id="tabla-productos">
            <thead>
              <tr>
                <th>C√≥digo</th>
                <th>Descripci√≥n</th>
                <th>Tipo</th>
                <th>Precio Base</th>
                <th>IVA</th>
                <th>Precio Final</th>
                <th>Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="7" class="text-center">No hay productos</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Configuraci√≥n View -->
        <div id="configuracion-view" class="view">
          <form id="form-configuracion" class="config-form">
            <div class="form-section">
              <h3>Informaci√≥n de la Empresa</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label>NIT *</label>
                  <input type="text" id="config-nit" placeholder="0000-000000-000-0" required>
                </div>
                <div class="form-group">
                  <label>Nombre de la Empresa *</label>
                  <input type="text" id="config-nombre" required>
                </div>
                <div class="form-group">
                  <label>Nombre Comercial</label>
                  <input type="text" id="config-nombre-comercial">
                </div>
                <div class="form-group">
                  <label>Actividad Econ√≥mica *</label>
                  <input type="text" id="config-actividad">
                </div>
                <div class="form-group">
                  <label>Tel√©fono</label>
                  <input type="tel" id="config-telefono">
                </div>
                <div class="form-group">
                  <label>Email</label>
                  <input type="email" id="config-email">
                </div>
                <div class="form-group full-width">
                  <label>Direcci√≥n</label>
                  <textarea id="config-direccion" rows="2"></textarea>
                </div>
              </div>
            </div>

            <div class="form-section">
              <h3>Configuraci√≥n de Hacienda</h3>
              <div class="form-grid">
                <div class="form-group">
                  <label>Usuario Hacienda</label>
                  <input type="text" id="config-hacienda-usuario">
                </div>
                <div class="form-group">
                  <label>Contrase√±a Hacienda</label>
                  <input type="password" id="config-hacienda-password">
                </div>
                <div class="form-group">
                  <label>Ambiente</label>
                  <select id="config-hacienda-ambiente">
                    <option value="pruebas">Pruebas</option>
                    <option value="produccion">Producci√≥n</option>
                  </select>
                </div>
                <div class="form-group">
                  <label>C√≥digo Establecimiento</label>
                  <input type="text" id="config-establecimiento">
                </div>
                <div class="form-group">
                  <label>Punto de Venta</label>
                  <input type="text" id="config-punto-venta">
                </div>
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn btn-secondary" id="btn-test-conexion">
                Probar Conexi√≥n
              </button>
              <button type="submit" class="btn btn-primary">Guardar Configuraci√≥n</button>
            </div>
          </form>
        </div>
      </div>
    </main>
  </div>

  <!-- Modal para Cliente -->
  <div id="modal-cliente" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-cliente-titulo">Nuevo Cliente</h2>
        <button class="close-modal" onclick="cerrarModalCliente()">√ó</button>
      </div>
      <form id="form-cliente" class="modal-form">
        <input type="hidden" id="cliente-id">
        
        <div class="form-group">
          <label>Tipo de Documento *</label>
          <select id="cliente-tipo-documento" required>
            <option value="13">NIT</option>
            <option value="36">DUI</option>
            <option value="37">Pasaporte</option>
            <option value="03">Carnet de Residente</option>
            <option value="02">Otro</option>
          </select>
        </div>

        <div class="form-group">
          <label>N√∫mero de Documento *</label>
          <input type="text" id="cliente-numero-documento" placeholder="0000-000000-000-0" required>
        </div>

        <div class="form-group">
          <label>Nombre o Raz√≥n Social *</label>
          <input type="text" id="cliente-nombre" required>
        </div>

        <div class="form-group">
          <label>Nombre Comercial</label>
          <input type="text" id="cliente-nombre-comercial">
        </div>

        <div class="form-group">
          <label>Tel√©fono</label>
          <input type="tel" id="cliente-telefono" placeholder="7000-0000">
        </div>

        <div class="form-group">
          <label>Email</label>
          <input type="email" id="cliente-email">
        </div>

        <div class="form-group">
          <label>Departamento</label>
          <select id="cliente-departamento">
            <option value="">Seleccionar...</option>
            <option value="01">Ahuachap√°n</option>
            <option value="02">Santa Ana</option>
            <option value="03">Sonsonate</option>
            <option value="04">Chalatenango</option>
            <option value="05">La Libertad</option>
            <option value="06">San Salvador</option>
            <option value="07">Cuscatl√°n</option>
            <option value="08">La Paz</option>
            <option value="09">Caba√±as</option>
            <option value="10">San Vicente</option>
            <option value="11">Usulut√°n</option>
            <option value="12">San Miguel</option>
            <option value="13">Moraz√°n</option>
            <option value="14">La Uni√≥n</option>
          </select>
        </div>

        <div class="form-group">
          <label>Municipio</label>
          <input type="text" id="cliente-municipio">
        </div>

        <div class="form-group full-width">
          <label>Direcci√≥n</label>
          <textarea id="cliente-direccion" rows="2"></textarea>
        </div>

        <div class="form-group">
          <label>Giro o Actividad</label>
          <input type="text" id="cliente-giro">
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="cerrarModalCliente()">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar Cliente</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal para Producto -->
  <div id="modal-producto" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-producto-titulo">Nuevo Producto/Servicio</h2>
        <button class="close-modal" onclick="cerrarModalProducto()">√ó</button>
      </div>
      <form id="form-producto" class="modal-form">
        <input type="hidden" id="producto-id">
        
        <div class="form-group">
          <label>Tipo *</label>
          <select id="producto-tipo" required>
            <option value="1">Bien (Producto)</option>
            <option value="2">Servicio</option>
            <option value="3">Ambos</option>
            <option value="4">Otros</option>
          </select>
        </div>

        <div class="form-group">
          <label>C√≥digo *</label>
          <input type="text" id="producto-codigo" placeholder="PROD-001" required>
        </div>

        <div class="form-group full-width">
          <label>Descripci√≥n *</label>
          <input type="text" id="producto-descripcion" placeholder="Descripci√≥n del producto o servicio" required>
        </div>

        <div class="form-group">
          <label>Precio Unitario *</label>
          <input type="number" id="producto-precio" step="0.01" min="0" placeholder="0.00" required>
        </div>

        <div class="form-group">
          <label>Unidad de Medida</label>
          <select id="producto-unidad">
            <option value="99">Unidad</option>
            <option value="59">Caja</option>
            <option value="11">Kilogramo</option>
            <option value="14">Gramo</option>
            <option value="22">Metro</option>
            <option value="23">Metro cuadrado</option>
            <option value="26">Metro c√∫bico</option>
            <option value="29">Litro</option>
            <option value="58">Docena</option>
            <option value="99">Otros</option>
          </select>
        </div>

        <div class="form-group">
          <label>IVA (13%)</label>
          <select id="producto-iva" required>
            <option value="1">Gravado (con IVA)</option>
            <option value="0">Exento (sin IVA)</option>
          </select>
        </div>

        <div class="form-group full-width">
          <label>Notas o Comentarios</label>
          <textarea id="producto-notas" rows="2" placeholder="Informaci√≥n adicional del producto"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="cerrarModalProducto()">Cancelar</button>
          <button type="submit" class="btn btn-primary">Guardar Producto</button>
        </div>
      </form>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
